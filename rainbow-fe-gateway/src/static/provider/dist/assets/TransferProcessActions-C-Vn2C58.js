import{f as S,n as y,r as P,G as N,j as e,D as T,o as D,p as E,s as A,B as d,F,t as M,v as Y,a as l,w as R,x as h,y as u}from"./index-omH1oWRl.js";import{d as _}from"./dayjs.min-BAmgoTqK.js";import{L as H,a as i,b as a}from"./list-cTQVuLal.js";import{N as b}from"./noFurtherActions-BBC3hgsu.js";const O=async s=>{let t=await(await fetch(s.api_gateway+"/transfers/rpc/setup-start",{headers:{"Content-Type":"application/json"},body:JSON.stringify(s.content),method:"POST"})).json();if(t.error)throw new Error(t.error);return{providerPid:t.providerPid}},L=()=>{const{data:s,isSuccess:t,isError:n,error:x,mutate:j,isPending:p,mutateAsync:o}=S({mutationFn:O,onMutate:async()=>{},onError:c=>{console.log("onError"),console.log(c)},onSuccess:async({},c)=>{console.log("onSuccess")},onSettled:()=>{}});return{data:s,isSuccess:t,isError:n,error:x,mutate:j,mutateAsync:o,isPending:p}},V=async s=>{let t=await(await fetch(s.api_gateway+"/transfers/rpc/setup-suspension",{headers:{"Content-Type":"application/json"},body:JSON.stringify(s.content),method:"POST"})).json();if(t.error)throw new Error(t.error);return{providerPid:t.providerPid}},U=()=>{const{data:s,isSuccess:t,isError:n,error:x,mutate:j,isPending:p,mutateAsync:o}=S({mutationFn:V,onMutate:async()=>{},onError:c=>{console.log("onError"),console.log(c)},onSuccess:async({},c)=>{console.log("onSuccess")},onSettled:()=>{}});return{data:s,isSuccess:t,isError:n,error:x,mutate:j,mutateAsync:o,isPending:p}},k=async s=>{let t=await(await fetch(s.api_gateway+"/transfers/rpc/setup-completion",{headers:{"Content-Type":"application/json"},body:JSON.stringify(s.content),method:"POST"})).json();if(t.error)throw new Error(t.error);return{providerPid:t.providerPid}},B=()=>{const{data:s,isSuccess:t,isError:n,error:x,mutate:j,isPending:p,mutateAsync:o}=S({mutationFn:k,onMutate:async()=>{},onError:c=>{console.log("onError"),console.log(c)},onSuccess:async({},c)=>{console.log("onSuccess")},onSettled:()=>{}});return{data:s,isSuccess:t,isError:n,error:x,mutate:j,mutateAsync:o,isPending:p}},K=async s=>{let t=await(await fetch(s.api_gateway+"/transfers/rpc/setup-termination",{headers:{"Content-Type":"application/json"},body:JSON.stringify(s.content),method:"POST"})).json();if(t.error)throw new Error(t.error);return{providerPid:t.providerPid}},J=()=>{const{data:s,isSuccess:t,isError:n,error:x,mutate:j,isPending:p,mutateAsync:o}=S({mutationFn:K,onMutate:async()=>{},onError:c=>{console.log("onError"),console.log(c)},onSuccess:async({},c)=>{console.log("onSuccess")},onSettled:()=>{}});return{data:s,isSuccess:t,isError:n,error:x,mutate:j,mutateAsync:o,isPending:p}},I=({process:s})=>{var v,f;const t=y({}),{handleSubmit:n,control:x,setValue:j,getValues:p}=t,{mutateAsync:o}=L(),{api_gateway:c,dsrole:m}=P.useContext(N),g=()=>{if(m=="provider")return o({api_gateway:c,content:{consumerParticipantId:s.associated_consumer,consumerCallbackAddress:s.data_plane_id,consumerPid:s.consumer_pid,providerPid:s.provider_pid}});if(m=="consumer")return o({api_gateway:c,content:{providerParticipantId:s.associated_provider,consumerPid:s.consumer_pid,providerPid:s.provider_pid}})},r="basis-[33%]";return e.jsxs(T,{className:"w-[70dvw] sm:max-w-fit",children:[e.jsxs(D,{children:[e.jsx(E,{children:"Transfer start dialog"}),e.jsx(A,{children:e.jsx("span",{children:"You are about to start the transfer process with the following information."})})]}),e.jsxs(H,{className:"min-w-full  px-2",children:[e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Provider Participant id:"}),e.jsx(d,{variant:"info",children:s.provider_pid.slice(9,-1)})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Consumer Participant id:"}),e.jsx(d,{variant:"info",children:s.consumer_pid.slice(9,-1)})]}),e.jsxs(i,{children:[m=="provider"&&e.jsxs(e.Fragment,{children:[e.jsx(a,{className:r,children:"Associated consumer:"}),e.jsx(d,{variant:"info",children:((v=s.associated_consumer)==null?void 0:v.slice(9,40))+"[...]"})]}),m=="consumer"&&e.jsxs(e.Fragment,{children:[e.jsx(a,{className:r,children:"Associated provider:"}),e.jsx(d,{variant:"info",children:((f=s.associated_provider)==null?void 0:f.slice(9,40))+"[...]"})]})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Current state:"}),e.jsx(d,{variant:"status",state:s.state,children:s.state})]}),s.state_attribute&&e.jsxs(i,{children:[e.jsx(a,{className:r,children:"State attribute:"}),e.jsx(d,{variant:"status",state:s.state_attribute,children:s.state_attribute})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Created at:"}),_(s.created_at).format("DD/MM/YY HH:mm")]}),s.updated_at&&e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Updated at:"}),_(s.updated_at).format("DD/MM/YY HH:mm")]})]}),e.jsx(F,{...t,children:e.jsx("form",{onSubmit:n(g),className:"space-y-6",children:e.jsxs(M,{className:"[&>*]:w-full",children:[e.jsx(Y,{asChild:!0,children:e.jsx(l,{variant:"ghost",type:"reset",children:"Cancel"})}),e.jsx(l,{type:"submit",children:"Start"})]})})})]})},C=({process:s})=>{var v,f;const t=y({}),{handleSubmit:n,control:x,setValue:j,getValues:p}=t,{mutateAsync:o}=J(),{api_gateway:c,dsrole:m}=P.useContext(N),g=async()=>{m=="provider"&&await o({api_gateway:c,content:{consumerParticipantId:s.associated_consumer,consumerCallbackAddress:s.data_plane_id,consumerPid:s.consumer_pid,providerPid:s.provider_pid}}),m=="consumer"&&await o({api_gateway:c,content:{providerParticipantId:s.associated_provider,consumerPid:s.consumer_pid,providerPid:s.provider_pid}})},r="basis-[33%]";return e.jsxs(T,{className:"w-[70dvw] sm:max-w-fit",children:[e.jsxs(D,{children:[e.jsx(E,{children:"Transfer termination dialog"}),e.jsx(A,{className:"max-w-full flex flex-wrap",children:e.jsx("span",{className:"max-w-full flex flex-wrap",children:"You are about to terminate the transfer process."})})]}),e.jsxs(H,{className:"min-w-full  px-2",children:[e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Provider Participant id:"}),e.jsx(d,{variant:"info",children:s.provider_pid.slice(9,-1)})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Consumer Participant id:"}),e.jsx(d,{variant:"info",children:s.consumer_pid.slice(9,-1)})]}),e.jsxs(i,{children:[m=="provider"&&e.jsxs(e.Fragment,{children:[e.jsx(a,{className:r,children:"Associated consumer:"}),e.jsx(d,{variant:"info",children:((v=s.associated_consumer)==null?void 0:v.slice(9,40))+"[...]"})]}),m=="consumer"&&e.jsxs(e.Fragment,{children:[e.jsx(a,{className:r,children:"Associated provider:"}),e.jsx(d,{variant:"info",children:((f=s.associated_provider)==null?void 0:f.slice(9,40))+"[...]"})]})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Current state:"}),e.jsx(d,{variant:"status",state:s.state,children:s.state})]}),s.state_attribute&&e.jsxs(i,{children:[e.jsx(a,{className:r,children:"State attribute:"}),e.jsx(d,{variant:"status",state:s.state_attribute,children:s.state_attribute})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Created at:"}),_(s.created_at).format("DD/MM/YY HH:mm")]}),s.updated_at&&e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Updated at:"}),_(s.updated_at).format("DD/MM/YY HH:mm")]})]}),e.jsx(F,{...t,children:e.jsx("form",{onSubmit:n(g),className:"space-y-6",children:e.jsxs(M,{className:"[&>*]:w-full",children:[e.jsx(Y,{asChild:!0,children:e.jsx(l,{variant:"ghost",type:"reset",children:"Cancel"})}),e.jsx(l,{variant:"destructive",type:"submit",children:"Terminate"})]})})})]})},z=({process:s})=>{var v,f;const t=y({}),{handleSubmit:n,control:x,setValue:j,getValues:p}=t,{mutateAsync:o}=U(),{api_gateway:c,dsrole:m}=P.useContext(N),g=()=>{if(m=="provider")return o({api_gateway:c,content:{consumerParticipantId:s.associated_consumer,consumerCallbackAddress:s.data_plane_id,consumerPid:s.consumer_pid,providerPid:s.provider_pid}});m=="consumer"&&o({api_gateway:c,content:{providerParticipantId:s.associated_provider,consumerPid:s.consumer_pid,providerPid:s.provider_pid}})},r="basis-[33%]";return e.jsxs(T,{className:"w-[70dvw] sm:max-w-fit",children:[e.jsxs(D,{children:[e.jsx(E,{children:"Transfer suspension dialog"}),e.jsx(A,{children:e.jsx("span",{children:"You are about to suspend the transfer process with the following information."})})]}),e.jsxs(H,{className:"min-w-full  px-2",children:[e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Provider Participant id:"}),e.jsx(d,{variant:"info",children:s.provider_pid.slice(9,-1)})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Consumer Participant id:"}),e.jsx(d,{variant:"info",children:s.consumer_pid.slice(9,-1)})]}),e.jsxs(i,{children:[m=="provider"&&e.jsxs(e.Fragment,{children:[e.jsx(a,{className:r,children:"Associated consumer:"}),e.jsx(d,{variant:"info",children:((v=s.associated_consumer)==null?void 0:v.slice(9,40))+"[...]"})]}),m=="consumer"&&e.jsxs(e.Fragment,{children:[e.jsx(a,{className:r,children:"Associated provider:"}),e.jsx(d,{variant:"info",children:((f=s.associated_provider)==null?void 0:f.slice(9,40))+"[...]"})]})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Current state:"}),e.jsx(d,{variant:"status",state:s.state,children:s.state})]}),s.state_attribute&&e.jsxs(i,{children:[e.jsx(a,{className:r,children:"State attribute:"}),e.jsx(d,{variant:"status",state:s.state_attribute,children:s.state_attribute})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Created at:"}),_(s.created_at).format("DD/MM/YY HH:mm")]}),s.updated_at&&e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Updated at:"}),_(s.updated_at).format("DD/MM/YY HH:mm")]})]}),e.jsx(F,{...t,children:e.jsx("form",{onSubmit:n(g),className:"space-y-6",children:e.jsxs(M,{className:"[&>*]:w-full",children:[e.jsx(Y,{asChild:!0,children:e.jsx(l,{variant:"ghost",type:"reset",children:"Cancel"})}),e.jsx(l,{type:"submit",children:"Suspend"})]})})})]})},w=({process:s})=>{var v,f;const t=y({}),{handleSubmit:n,control:x,setValue:j,getValues:p}=t,{mutateAsync:o}=B(),{api_gateway:c,dsrole:m}=P.useContext(N),g=()=>{if(m=="provider")return o({api_gateway:c,content:{consumerParticipantId:s.associated_consumer,consumerCallbackAddress:s.data_plane_id,consumerPid:s.consumer_pid,providerPid:s.provider_pid}});m=="consumer"&&o({api_gateway:c,content:{providerParticipantId:s.associated_provider,consumerPid:s.consumer_pid,providerPid:s.provider_pid}})},r="basis-[33%]";return e.jsxs(T,{className:"w-[70dvw] sm:max-w-fit",children:[e.jsxs(D,{children:[e.jsx(E,{children:"Transfer completion dialog"}),e.jsx(A,{children:e.jsx("span",{children:"You are about to complete the transfer process with the following information."})})]}),e.jsxs(H,{className:"min-w-full  px-2",children:[e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Provider Participant id:"}),e.jsx(d,{variant:"info",children:s.provider_pid.slice(9,-1)})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Consumer Participant id:"}),e.jsx(d,{variant:"info",children:s.consumer_pid.slice(9,-1)})]}),e.jsxs(i,{children:[m=="provider"&&e.jsxs(e.Fragment,{children:[e.jsx(a,{className:r,children:"Associated consumer:"}),e.jsx(d,{variant:"info",children:((v=s.associated_consumer)==null?void 0:v.slice(9,40))+"[...]"})]}),m=="consumer"&&e.jsxs(e.Fragment,{children:[e.jsx(a,{className:r,children:"Associated provider:"}),e.jsx(d,{variant:"info",children:((f=s.associated_provider)==null?void 0:f.slice(9,40))+"[...]"})]})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Current state:"}),e.jsx(d,{variant:"status",state:s.state,children:s.state})]}),s.state_attribute&&e.jsxs(i,{children:[e.jsx(a,{className:r,children:"State attribute:"}),e.jsx(d,{variant:"status",state:s.state_attribute,children:s.state_attribute})]}),e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Created at:"}),_(s.created_at).format("DD/MM/YY HH:mm")]}),s.updated_at&&e.jsxs(i,{children:[e.jsx(a,{className:r,children:"Updated at:"}),_(s.updated_at).format("DD/MM/YY HH:mm")]})]}),e.jsx(F,{...t,children:e.jsx("form",{onSubmit:n(g),className:"space-y-6",children:e.jsxs(M,{className:"[&>*]:w-full",children:[e.jsx(Y,{asChild:!0,children:e.jsx(l,{variant:"ghost",type:"reset",children:"Cancel"})}),e.jsx(l,{type:"submit",children:"Complete"})]})})})]})},X=({process:s,tiny:t=!1})=>{const{dsrole:n}=P.useContext(N),x=R("",{variants:{tiny:{true:"inline-flex items-center ",false:"bg-background  w-full p-6 pt-4 fixed bottom-0 left-0 md:left-[223px] bg-primary-950/10 border border-t-stroke [&>*>button]:min-w-20"}}});return e.jsxs("div",{className:x({tiny:t}),children:[s.state==="REQUESTED"&&e.jsxs("div",{className:"space-x-2",children:[n==="provider"&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"destructive",size:t?"sm":"",children:"Terminate"})}),e.jsx(C,{process:s})]}),e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{size:t?"sm":"",children:"Start"})}),e.jsx(I,{process:s})]})]}),n==="consumer"&&e.jsx(e.Fragment,{children:e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"destructive",size:t?"sm":"",children:"Terminate"})}),e.jsx(C,{process:s})]})})]}),s.state==="STARTED"&&e.jsxs("div",{className:"space-x-2",children:[n==="provider"&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"destructive",size:t?"sm":"",children:"Terminate"})}),e.jsx(C,{process:s})]}),e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"outline",size:t?"sm":"",children:"Suspend"})}),e.jsx(z,{process:s})]}),e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"outline",size:t?"sm":"",children:"Complete"})}),e.jsx(w,{process:s})]})]}),n==="consumer"&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"destructive",size:t?"sm":"",children:"Terminate"})}),e.jsx(C,{process:s})]}),e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"outline",size:t?"sm":"",children:"Suspend"})}),e.jsx(z,{process:s})]}),e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"outline",size:t?"sm":"",children:"Complete"})}),e.jsx(w,{process:s})]})]})]}),s.state==="SUSPENDED"&&e.jsxs("div",{className:"space-x-2",children:[n==="provider"&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"destructive",size:t?"sm":"",children:"Terminate"})}),e.jsx(C,{process:s})]}),s.state_attribute&&s.state_attribute!=="BY_CONSUMER"&&e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{size:t?"sm":"",children:"Start"})}),e.jsx(I,{process:s})]}),e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"outline",size:t?"sm":"",children:"Complete"})}),e.jsx(w,{process:s})]})]}),n==="consumer"&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"destructive",size:t?"sm":"",children:"Terminate"})}),e.jsx(C,{process:s})]}),s.state_attribute&&s.state_attribute!=="BY_PROVIDER"&&e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{size:t?"sm":"",children:"Start"})}),e.jsx(I,{process:s})]}),e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsx(l,{variant:"outline",size:t?"sm":"",children:"Complete"})}),e.jsx(w,{process:s})]})]})]}),s.state==="COMPLETED"&&e.jsxs("div",{className:"space-x-2",children:[n==="provider"&&e.jsx(e.Fragment,{children:e.jsx(b,{})}),n==="consumer"&&e.jsx(e.Fragment,{children:e.jsx(b,{})})]}),s.state==="TERMINATED"&&e.jsxs("div",{className:"space-x-2",children:[n==="provider"&&e.jsx(e.Fragment,{children:e.jsx(b,{})}),n==="consumer"&&e.jsx(e.Fragment,{children:e.jsx(b,{})})]})]})};export{X as T};
