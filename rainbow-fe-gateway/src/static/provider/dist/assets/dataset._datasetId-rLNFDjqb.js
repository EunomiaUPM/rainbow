import{aY as w,aw as I,r as o,G as P,j as s,B as c,L,a as m}from"./index-BKNGGEqZ.js";import{d as C,e as T}from"./catalog-queries-D8n3pmys.js";import{T as H,a as Y,b as x,c as i,d as R,e as r}from"./table-BWYAnnXB.js";import{d as h}from"./dayjs.min-55dgfSPC.js";import{u as B,P as S}from"./PolicyWrapperNew-zTIuV6Bq.js";import{H as l}from"./heading-CTsk76kk.js";import{L as A,a as j,b as p,c as f}from"./list-0KhXwJaN.js";import{D as O,a as G,b as M,c as k,d as z}from"./drawer-CG8Xl6Dp.js";import{P as E}from"./PolicyWrapperShow-CprUHtaU.js";import{A as W}from"./arrow-right-DWNQhlJl.js";import{P as _}from"./plus-CZgxH7Ve.js";import"./index-BaJSRc3j.js";import"./index-12Y7aCG6.js";import"./trash-DIWeGhVY.js";const rs=function(){const{catalogId:D,datasetId:a}=w.useParams(),{data:t}=C(a),{data:u}=T(a),{data:n}=I(a),[v,d]=o.useState(!1),{mutateAsync:g}=B(),{api_gateway:y}=o.useContext(P),N={participant_type:"Provider"},b=async e=>{await g({api_gateway:y,datasetId:a,content:{offer:JSON.stringify(e)}}),d(!1)};return s.jsxs("div",{className:"space-y-8 pb-4",children:[s.jsxs(l,{level:"h3",className:"flex gap-2 items-center",children:["Dataset with id",s.jsxs(c,{variant:"info",size:"lg",children:[" ",t["@id"].slice(9,29)+"[...]"]})]}),s.jsx("div",{className:"gridColsLayout",children:s.jsxs(A,{className:"text-sm",children:[s.jsxs(j,{children:[s.jsx(p,{children:"Dataset title"}),s.jsx("p",{children:t.title})]}),s.jsxs(j,{children:[s.jsx(p,{children:"Catalog creation date"}),s.jsx(f,{children:h(t.issued).format("DD/MM/YYYY - HH:mm")})]})]})}),s.jsxs("div",{children:[s.jsx(l,{level:"h5",children:"Distributions"}),s.jsxs(H,{className:"text-sm",children:[s.jsx(Y,{children:s.jsxs(x,{children:[s.jsx(i,{children:"Distribution Id"}),s.jsx(i,{children:"Distribution Title"}),s.jsx(i,{children:"Created at"}),s.jsx(i,{children:"Associated Data service"})]})}),s.jsx(R,{children:u.map(e=>s.jsxs(x,{children:[s.jsx(r,{children:s.jsx(c,{variant:"info",children:e["@id"].slice(9,29)+"[...]"})}),s.jsx(r,{children:e.title?e.title:"undefined"}),s.jsx(r,{children:s.jsx(f,{children:h(e.issued).format("DD/MM/YYYY - HH:mm")})}),s.jsx(r,{children:s.jsx(L,{to:"/catalog/$catalogId/data-service/$dataserviceId",params:{catalogId:D,dataserviceId:e.accessService["@id"]},children:s.jsxs(m,{variant:"link",children:["See dataservice",s.jsx(W,{})]})})})]},e["@id"].slice(0,20)))})]})]}),s.jsxs("div",{className:" flex flex-row mb-2 items-center",children:[s.jsxs(l,{level:"h5",className:"mb-0",children:[" ","ODRL Policies"," "]}),s.jsxs(O,{direction:"right",open:v,onOpenChange:e=>d(e),children:[s.jsx(G,{children:s.jsxs(m,{variant:"default",size:"sm",className:"mb-1 ml-3",children:["Add ODRL policy",s.jsx(_,{className:""})]})}),s.jsxs(M,{children:[s.jsx(k,{className:"px-8",children:s.jsxs(z,{children:[s.jsx(l,{level:"h4",className:"text-curren mb-0 ",children:"New ODRL Policy"}),s.jsxs("div",{className:"font-normal text-brand-sky",children:["for Dataset",s.jsx(c,{variant:"info",size:"sm",className:"ml-2",children:t["@id"].slice(9,29)+"[...]"})]})]})}),s.jsx(S,{onSubmit:b})]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:n&&n.map(e=>s.jsx(E,{policy:e,participant:N,datasetId:a,catalogId:void 0,datasetName:""},e["@id"]))})]})};export{rs as component};
