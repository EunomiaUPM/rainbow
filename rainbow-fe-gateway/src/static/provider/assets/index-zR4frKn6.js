import{e as b,f as w,g as f,r as m,P as y,G as g,j as e,a as o,I as v,B as c,L as P}from"./index-omH1oWRl.js";import{T as C,a as N,b as u,c as t,d as T,e as n}from"./table-BwqLlQhv.js";import{D,a as _,b as I,c as S,d as k,e as A,f as H,g as B}from"./drawer-DhPcwUCn.js";import{H as p}from"./heading-BXPqTu4h.js";import{P as R}from"./plus-C6EOZAEU.js";import{A as E}from"./arrow-right-yeyo7jFN.js";const L=async({api_gateway:i})=>{await fetch(i+"/wallet/onboard",{method:"POST"})},M=()=>{const i=b(),{data:a,isSuccess:d,isError:x,error:h,mutate:l,mutateAsync:j,isPending:s}=w({mutationFn:L,onMutate:async()=>{},onError:r=>{console.log("onError"),console.log(r)},onSuccess:async(r,O)=>{console.log("onSuccess"),await i.refetchQueries(["PARTICIPANTS"])},onSettled:()=>{}});return{data:a,isSuccess:d,isError:x,error:h,mutate:l,mutateAsync:j,isPending:s}},U=function(){const{data:a}=f(),{lastHighLightedNotification:d}=m.useContext(y),{mutateAsync:x}=M(),{api_gateway:h}=m.useContext(g),l=m.useMemo(()=>a.find(s=>s.participant_type=="Provider"),[a]),j=async()=>{await x({api_gateway:h})};return e.jsxs("div",{children:[!l&&e.jsxs("div",{className:"p-8 py-6 mx-auto w-fit max-w-[70ch] bg-brand-sky/5 border border-stroke rounded-md",children:[e.jsx(p,{level:"h3",children:"Missing wallet..."}),e.jsxs(p,{level:"h5",children:["Your wallet is not yet connected as Provider. ",e.jsx("br",{})," Please complete the onboarding process to get started."]}),e.jsx(o,{size:"lg",className:"w-full mt-4",onClick:()=>j(),children:"Onboard wallet"})]}),l&&e.jsxs("div",{children:[e.jsxs("div",{className:"pb-3 w-full flex justify-between items-center",children:[e.jsx("div",{className:"basis-3/5",children:e.jsx(v,{type:"search"})}),e.jsxs(D,{direction:"right",children:[e.jsx(_,{className:"hidden",children:e.jsxs(o,{children:["Add participant",e.jsx(R,{className:"mb-1"})]})}),e.jsxs(I,{children:[e.jsx(S,{children:e.jsx(k,{children:e.jsx(p,{level:"h5",className:"text-current",children:"New Participant"})})}),e.jsx(A,{}),e.jsx(H,{children:e.jsx(B,{className:"flex justify-start gap-4",children:e.jsx(o,{variant:"ghost",className:"w-40",children:"Cancel"})})})]})]})]}),e.jsxs(C,{className:"text-sm",children:[e.jsx(N,{children:e.jsxs(u,{children:[e.jsx(t,{children:"Participant ID"}),e.jsx(t,{children:"Identity Token"}),e.jsx(t,{children:"Participant Type"}),e.jsx(t,{children:"Base URL"}),e.jsx(t,{children:"Link"})]})}),e.jsx(T,{children:a.map(s=>{var r;return e.jsxs(u,{className:s.participant_id===d?"bg-primary-200":"",children:[e.jsx(n,{children:e.jsx(c,{variant:"info",children:s.participant_id.slice(9,20)+"..."})}),e.jsx(n,{children:e.jsx(c,{variant:"info",children:((r=s.token)==null?void 0:r.slice(0,20))+"..."})}),e.jsx(n,{children:e.jsx(c,{variant:"role",role:s.participant_type,children:s.participant_type})}),e.jsx(n,{children:e.jsx(c,{variant:"info",children:s.base_url})}),e.jsx(n,{children:e.jsx(P,{to:"/participants/$participantId",params:{participantId:s.participant_id},children:e.jsxs(o,{variant:"link",children:["See details",e.jsx(E,{})]})})})]},s.participant_id.slice(0,20))})})]})]})]})};export{U as component};
