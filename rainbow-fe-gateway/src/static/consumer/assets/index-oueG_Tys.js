import{ad as B,aJ as R,aP as L,r as d,G as T,i as H,j as e,F as Y,B as h,aQ as k,aR as G,aS as q,H as o,L as A}from"./index-BAHtZRt5.js";import{d as f}from"./dayjs.min-d0FxSukb.js";import{T as M,a as F,b as v,c as l,d as O,e as n}from"./table-D7ydnTSG.js";import{B as c}from"./badge-DhRbdQWa.js";import{L as $,a as x,b as m,c as y}from"./list-jggyKCr8.js";import{D as z,a as E,b as V,c as _,d as J,e as K}from"./drawer-dPwdgVEi.js";import{P as Q}from"./PolicyWrapperShow-CSPmaTRR.js";import{A as W}from"./arrow-right-DCuk5qsx.js";import"./PolicyComponent-BqMrEILi.js";import"./trash-D768vGVp.js";const U=({catalogId:i,datasetId:a,participantId:s,closeDrawer:j})=>{const{mutateAsync:t,isPending:u}=B(),{data:g}=R(s,a),{data:b}=L(s,a),{api_gateway:C}=d.useContext(T),[X,Z]=d.useState(!1),[ee,se]=d.useState(null),[ae,te]=d.useState([]),[N,D]=d.useState(null),p=H({defaultValues:{consumerParticipantId:"",id:a,catalog:i,target:a}}),{handleSubmit:w,control:ie}=p,P=async r=>{const I=g.find(S=>S["@id"]==r.id);await t({content:{providerParticipantId:s,offer:{"@id":I["@id"]}},api_gateway:C},{})};return e.jsxs("div",{className:"max-w-[500px] w-full px-6",children:[e.jsxs("div",{className:" flex gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-200 mb-1",children:" Selected catalog"}),e.jsx(c,{variant:"info",children:i.slice(14)})]}),e.jsx("div",{className:"h-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-200 mb-1",children:" Selected dataset"}),e.jsx(c,{variant:"info",children:b.title})]})]}),e.jsx("div",{className:"h-5"}),e.jsx(Y,{...p,children:e.jsxs("form",{onSubmit:w(P),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-200 ",children:" Policies"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Select the policy from the dataset that best matches your needs."}),e.jsx("div",{className:"flex flex-wrap gap-4 mt-3 mb-24",children:g.map(r=>e.jsx("div",{className:N===r?" outline outline-offset-2 outline-secondary-500 rounded-[6px] ":"opacity-70",onClick:()=>{D(r),p.setValue("id",r["@id"])},children:e.jsx(Q,{policy:r,datasetId:void 0,catalogId:void 0,participant:void 0,datasetName:""})}))})]}),e.jsxs("div",{className:"flex gap-2 border-t fixed bottom-0  p-6 w-full bg-background border-white/30",style:{marginLeft:-48},children:[e.jsxs(h,{type:"submit",disabled:u,className:"w-48",children:["Submit Offer ",u&&e.jsx("span",{className:"ml-2",children:"..."})]}),e.jsx(h,{variant:"ghost",onClick:j,children:"Cancel"})]})]})})]})},pe=()=>{const{provider:i,catalogId:a}=k.useParams(),{data:s}=G(i,a),{data:j}=q(i,a);return e.jsxs("div",{className:"space-y-4 pb-4",children:[e.jsxs(o,{level:"h3",className:"flex gap-2 items-center",children:["Catalog",e.jsx(c,{variant:"info",size:"lg",children:s["@id"].slice(9,29)+"[...]"})]}),e.jsxs("div",{children:[e.jsx(o,{level:"h5",children:"Catalog info:"}),e.jsx("div",{className:"gridColsLayout",children:e.jsxs($,{children:[e.jsxs(x,{children:[e.jsx(m,{children:"Catalog title"}),e.jsx("p",{children:s.title})]}),e.jsxs(x,{children:[e.jsx(m,{children:"Catalog participant ID"}),e.jsx(c,{variant:"info",children:s.participantId.slice(9,29)+"[...]"})]}),e.jsxs(x,{children:[e.jsx(m,{children:"Catalog homepage"}),e.jsx("p",{children:s.homepage})]}),e.jsxs(x,{children:[e.jsx(m,{children:"Catalog creation date"}),e.jsx(y,{children:f(s.issued).format("DD/MM/YYYY - HH:mm")})]})]})})]}),e.jsxs("div",{children:[e.jsx(o,{level:"h5",children:"Datasets"}),e.jsxs(M,{className:"text-sm",children:[e.jsx(F,{children:e.jsxs(v,{children:[e.jsx(l,{children:"Dataset ID"}),e.jsx(l,{children:"Title"}),e.jsx(l,{children:"Provider ID"}),e.jsx(l,{children:"Created at"}),e.jsx(l,{children:"Actions"}),e.jsx(l,{children:"Link"})]})}),e.jsx(O,{children:j.map(t=>e.jsxs(v,{children:[e.jsx(n,{children:e.jsxs(c,{variant:"info",children:[" ",t["@id"].slice(9,29)+"..."]})}),e.jsx(n,{children:t.title}),e.jsx(n,{children:e.jsx(c,{variant:"info",children:s.participantId.slice(9,29)+"..."})}),e.jsx(n,{children:e.jsx(y,{children:f(s.issued).format("DD/MM/YYYY - HH:mm")})}),e.jsx(n,{children:e.jsxs(z,{direction:"right",children:[e.jsx(E,{children:e.jsx(h,{variant:"outline",size:"sm",children:"+ Request dataset"})}),e.jsxs(V,{children:[e.jsx(_,{children:e.jsx(J,{children:e.jsx(o,{level:"h5",className:"text-current",children:"New Contract Negotiation Request"})})}),e.jsx(K,{className:"items-start",children:e.jsx(U,{catalogId:a,datasetId:t["@id"],participantId:i})})]})]})}),e.jsx(n,{children:e.jsx(A,{to:"/provider-catalog/$provider/catalog/$catalogId/dataset/$datasetId",params:{catalogId:s["@id"],datasetId:t["@id"]},children:e.jsxs(h,{variant:"link",children:["See dataset",e.jsx(W,{})]})})})]},t["@id"].slice(9,29)))})]})]})]})};export{pe as component};
