import{ad as S,aJ as D,r as l,G as C,i as B,j as e,F as I,B as o,aK as T,H as j,I as R,L as k}from"./index-BAHtZRt5.js";import{B as m}from"./badge-DhRbdQWa.js";import{T as q,a as G,b as u,c as i,d as H,e as n}from"./table-D7ydnTSG.js";import{D as L,a as A,b as E,c as F,d as O,e as _}from"./drawer-dPwdgVEi.js";import{a as $,b as V}from"./catalog-datahub-bypass-queries-ZjvGi2tO.js";import{P as z}from"./PolicyWrapperShow-CSPmaTRR.js";import{A as J}from"./arrow-right-DCuk5qsx.js";import"./list-jggyKCr8.js";import"./PolicyComponent-BqMrEILi.js";import"./trash-D768vGVp.js";const K=({catalogId:t,datasetId:a,participantId:c,closeDrawer:s})=>{const{mutateAsync:d,isPending:h}=S(),{data:p}=D(c,a),{data:f}=$(c,a),{api_gateway:b}=l.useContext(C),[W,M]=l.useState(!1),[Q,U]=l.useState(null),[X,Y]=l.useState([]),[g,y]=l.useState(null),x=B({defaultValues:{consumerParticipantId:"",id:a,catalog:t,target:a}}),{handleSubmit:v,control:Z}=x,N=async r=>{const w=p.find(P=>P["@id"]==r.id);await d({content:{providerParticipantId:c,offer:{"@id":w["@id"]}},api_gateway:b},{})};return e.jsxs("div",{className:"max-w-[500px] w-full px-6",children:[e.jsxs("div",{className:" flex gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-200 mb-1",children:" Selected catalog"}),e.jsx(m,{variant:"info",children:t.slice(14)})]}),e.jsx("div",{className:"h-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-200 mb-1",children:" Selected dataset"}),e.jsx(m,{variant:"info",children:f.name})]})]}),e.jsx("div",{className:"h-5"}),e.jsx(I,{...x,children:e.jsxs("form",{onSubmit:v(N),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-200 ",children:" Policies"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Select the policy from the dataset that best matches your needs."}),e.jsx("div",{className:"flex flex-wrap gap-4 mt-3 mb-24",children:p.map(r=>e.jsx("div",{className:g===r?" outline outline-offset-2 outline-secondary-500 rounded-[6px] ":"opacity-70",onClick:()=>{y(r),x.setValue("id",r["@id"])},children:e.jsx(z,{policy:r,datasetId:void 0,catalogId:void 0,participant:void 0,datasetName:""})}))})]}),e.jsxs("div",{className:"flex gap-2 border-t fixed bottom-0  p-6 w-full bg-background border-white/30",style:{marginLeft:-48},children:[e.jsxs(o,{type:"submit",disabled:h,className:"w-48",children:["Submit Offer ",h&&e.jsx("span",{className:"ml-2",children:"..."})]}),e.jsx(o,{variant:"ghost",onClick:s,children:"Cancel"})]})]})})]})},oe=()=>{const{provider:t,catalogId:a}=T.useParams(),{data:c}=V(t,a);return e.jsx("div",{className:"space-y-4 pb-4",children:e.jsxs("div",{children:[e.jsx(j,{level:"h5",children:"Datasets"}),e.jsx("div",{className:"pb-3 w-3/5",children:e.jsx(R,{type:"search"})}),e.jsxs(q,{className:"text-sm",children:[e.jsx(G,{children:e.jsxs(u,{children:[e.jsx(i,{children:"Name"}),e.jsx(i,{children:"ETL system"}),e.jsx(i,{children:"Description"}),e.jsx(i,{children:"Glossary"}),e.jsx(i,{children:"Request"}),e.jsx(i,{children:"Link"})]})}),e.jsx(H,{children:c.map(s=>e.jsxs(u,{children:[e.jsx(n,{children:s.name}),e.jsx(n,{children:e.jsx(m,{variant:"info",children:s.platform.name})}),e.jsx(n,{className:"min-w-[220px]",children:e.jsxs("p",{className:"text-xs",children:[" ",s.description]})}),e.jsx(n,{children:e.jsx(m,{children:s.glossary_terms.map(d=>e.jsx("span",{children:d.glossaryTermInfo.name},d.urn))})}),e.jsx(n,{children:e.jsxs(L,{direction:"right",children:[e.jsx(A,{children:e.jsx(o,{variant:"outline",size:"sm",children:"+ Request dataset"})}),e.jsxs(E,{children:[e.jsx(F,{children:e.jsx(O,{children:e.jsx(j,{level:"h5",className:"text-current",children:"New Contract Negotiation Request"})})}),e.jsx(_,{className:"items-start",children:e.jsx(K,{catalogId:a,datasetId:s.urn,participantId:t})})]})]})}),e.jsx(n,{children:e.jsx(k,{to:"/provider-datahub-catalog/$provider/$catalogId/dataset/$datasetId",params:{provider:t,catalogId:a,datasetId:s.urn},children:e.jsxs(o,{variant:"link",children:["See dataset",e.jsx(J,{})]})})})]},s.urn))})]})]})})};export{oe as component};
