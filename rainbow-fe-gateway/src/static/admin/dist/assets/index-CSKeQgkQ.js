import{d as b,e as f,f as w,r as m,G as y,j as e,a as o,I as g,B as c,L as v}from"./index-Ebtqv1AD.js";import{T as P,a as C,b as u,c as t,d as N,e as n}from"./table-BEVO1uuR.js";import{D as T,a as D,b as _,c as I,d as S,e as k,f as A,g as H}from"./drawer-Bre77ZT8.js";import{P as B}from"./PubSubContext-MLiB1lm0.js";import{H as p}from"./heading-VCwKO4zQ.js";import{P as R}from"./plus-D0vqfoS-.js";import{A as E}from"./arrow-right-DsoXp0Kl.js";const L=async({api_gateway:i})=>{await fetch(i+"/wallet/onboard",{method:"POST"})},M=()=>{const i=b(),{data:a,isSuccess:d,isError:x,error:h,mutate:l,mutateAsync:j,isPending:s}=f({mutationFn:L,onMutate:async()=>{},onError:r=>{console.log("onError"),console.log(r)},onSuccess:async(r,O)=>{console.log("onSuccess"),await i.refetchQueries(["PARTICIPANTS"])},onSettled:()=>{}});return{data:a,isSuccess:d,isError:x,error:h,mutate:l,mutateAsync:j,isPending:s}},Y=function(){const{data:a}=w(),{lastHighLightedNotification:d}=m.useContext(B),{mutateAsync:x}=M(),{api_gateway:h}=m.useContext(y),l=m.useMemo(()=>a.find(s=>s.participant_type=="Provider"),[a]),j=async()=>{await x({api_gateway:h})};return e.jsxs("div",{children:[!l&&e.jsxs("div",{className:"p-8 py-6 mx-auto w-fit max-w-[70ch] bg-brand-sky/5 border border-stroke rounded-md",children:[e.jsx(p,{level:"h3",children:"Missing wallet..."}),e.jsxs(p,{level:"h5",children:["Your wallet is not yet connected as Provider. ",e.jsx("br",{})," Please complete the onboarding process to get started."]}),e.jsx(o,{size:"lg",className:"w-full mt-4",onClick:()=>j(),children:"Onboard wallet"})]}),l&&e.jsxs("div",{children:[e.jsxs("div",{className:"pb-3 w-full flex justify-between items-center",children:[e.jsx("div",{className:"basis-3/5",children:e.jsx(g,{type:"search"})}),e.jsxs(T,{direction:"right",children:[e.jsx(D,{className:"hidden",children:e.jsxs(o,{children:["Add participant",e.jsx(R,{className:"mb-1"})]})}),e.jsxs(_,{children:[e.jsx(I,{children:e.jsx(S,{children:e.jsx(p,{level:"h5",className:"text-current",children:"New Participant"})})}),e.jsx(k,{}),e.jsx(A,{children:e.jsx(H,{className:"flex justify-start gap-4",children:e.jsx(o,{variant:"ghost",className:"w-40",children:"Cancel"})})})]})]})]}),e.jsxs(P,{className:"text-sm",children:[e.jsx(C,{children:e.jsxs(u,{children:[e.jsx(t,{children:"Participant ID"}),e.jsx(t,{children:"Identity Token"}),e.jsx(t,{children:"Participant Type"}),e.jsx(t,{children:"Base URL"}),e.jsx(t,{children:"Link"})]})}),e.jsx(N,{children:a.map(s=>{var r;return e.jsxs(u,{className:s.participant_id===d?"bg-primary-200":"",children:[e.jsx(n,{children:e.jsx(c,{variant:"info",children:s.participant_id.slice(9,20)+"..."})}),e.jsx(n,{children:e.jsx(c,{variant:"info",children:((r=s.token)==null?void 0:r.slice(0,20))+"..."})}),e.jsx(n,{children:e.jsx(c,{variant:"role",role:s.participant_type,children:s.participant_type})}),e.jsx(n,{children:e.jsx(c,{variant:"info",children:s.base_url})}),e.jsx(n,{children:e.jsx(v,{to:"/participants/$participantId",params:{participantId:s.participant_id},children:e.jsxs(o,{variant:"link",children:["See details",e.jsx(E,{})]})})})]},s.participant_id.slice(0,20))})})]})]})]})};export{Y as component};
