import{r as o,j as s}from"./ui-B_Y8HlyQ.js";import{d as u,q as m}from"./tanstack-CQsG9zHS.js";import{G as b}from"./index-BIgPSPD9.js";import{T as h,a as j,b as c,c as n,d as p,e as i}from"./table-BjZx-WHX.js";import{d as x}from"./dayjs.min-C1qovwV9.js";import"./vendor-BtP0CW_r.js";import"./syntax-Deq619ix.js";const y=async(t,e)=>await(await fetch(t+`/subscriptions/${e}`)).json(),g=(t,e)=>m({queryKey:["SUBSCRIPTIONS_BY_ID",e],queryFn:()=>y(t,e)}),S=t=>{const{api_gateway:e}=o.useContext(b),{data:a,isLoading:r,isError:d,error:l}=u(g(e,t));return{data:a,isLoading:r,isError:d,error:l}},I=async(t,e)=>await(await fetch(t+`/subscriptions/${e}/notifications`)).json(),f=(t,e)=>m({queryKey:["NOTIFICATIONS_BY_SUBSCRIPTION_ID",e],queryFn:()=>I(t,e)}),C=t=>{const{api_gateway:e}=o.useContext(b),{data:a,isLoading:r,isError:d,error:l}=u(f(e,t));return{data:a,isLoading:r,isError:d,error:l}},T=o.createContext(null),H=()=>{const{subscriptionId:t}=o.useContext(T),{data:e}=S(t),{data:a}=C(t);return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-bold",children:"Subscription"}),s.jsxs("div",{children:["Subscription with id : ",e.subscriptionId]}),s.jsxs("div",{children:[s.jsx("h2",{children:"Main Catalog info: "}),s.jsxs(h,{className:"text-sm",children:[s.jsx(j,{children:s.jsxs(c,{children:[s.jsx(n,{children:"Key"}),s.jsx(n,{children:"Value"})]})}),s.jsxs(p,{children:[s.jsxs(c,{children:[s.jsx(i,{children:"Subscription callback address"}),s.jsx(i,{children:e.callbackAddress})]}),s.jsxs(c,{children:[s.jsx(i,{children:"Subscription state"}),s.jsx(i,{children:e.active?"ACTIVE":"INACTIVE"})]}),s.jsxs(c,{children:[s.jsx(i,{children:"Subscription entity"}),s.jsx(i,{children:e.subscriptionEntity})]}),s.jsxs(c,{children:[s.jsx(i,{children:"Subscription creation date"}),s.jsx(i,{children:x(e.timestamp).format("DD/MM/YYYY - HH:mm")})]}),s.jsxs(c,{children:[s.jsx(i,{children:"Subscription expiration date"}),s.jsx(i,{children:x(e.expirationTime).format("DD/MM/YYYY - HH:mm")})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{children:"Notifications"}),s.jsxs(h,{className:"text-sm",children:[s.jsx(j,{children:s.jsxs(c,{children:[s.jsx(n,{children:"Notification Id"}),s.jsx(n,{children:"Category"}),s.jsx(n,{children:"Subcategory"}),s.jsx(n,{children:"Message Type"}),s.jsx(n,{children:"Message operation"}),s.jsx(n,{children:"Message content"}),s.jsx(n,{children:"Message timestamp"})]})}),s.jsx(p,{children:a.map(r=>s.jsxs(c,{children:[s.jsx(i,{children:r.notificationId.slice(0,20)+"..."}),s.jsx(i,{children:r.category}),s.jsx(i,{children:r.subcategory}),s.jsx(i,{children:r.messageType}),s.jsx(i,{children:r.messageOperation}),s.jsx(i,{children:JSON.stringify(r.messageContent)}),s.jsx(i,{children:x(r.timestamp).format("DD/MM/YYYY - HH:mm")})]},r.notificationId.slice(0,20)))})]})]})]})};export{H as component};
