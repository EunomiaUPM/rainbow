import{r as l,j as e,a2 as b}from"./ui-B_Y8HlyQ.js";import{g as j,h as v,L as P}from"./tanstack-CQsG9zHS.js";import{b as _,G as A,a as x,B as c,f as y}from"./index-BIgPSPD9.js";import{D as w}from"./DataTable-DzeKJ7OI.js";import{H as g}from"./heading-DAwBOHqQ.js";import{I}from"./info-list-DPCM4wLx.js";import{P as k,a as f}from"./PageSection-BVfoDSQu.js";import{P as S}from"./PageHeader-4W-j4IfQ.js";import"./vendor-BtP0CW_r.js";import"./syntax-Deq619ix.js";import"./table-BjZx-WHX.js";import"./dayjs.min-C1qovwV9.js";const T=async({api_gateway:o})=>{await fetch(o+"/wallet/onboard",{method:"POST"})},C=()=>{const o=j(),{data:a,isSuccess:d,isError:p,error:n,mutate:i,mutateAsync:m,isPending:u}=v({mutationFn:T,onMutate:async()=>{},onError:s=>{console.log("onError"),console.log(s)},onSuccess:async(s,h)=>{console.log("onSuccess"),await o.refetchQueries(["PARTICIPANTS"])},onSettled:()=>{}});return{data:a,isSuccess:d,isError:p,error:n,mutate:i,mutateAsync:m,isPending:u}},Q=function(){const{data:a}=_(),{mutateAsync:d}=C(),{api_gateway:p}=l.useContext(A),n=l.useMemo(()=>a==null?void 0:a.find(t=>t.participant_type==="Agent"&&t.is_me===!0),[a]),i=l.useMemo(()=>(a==null?void 0:a.filter(t=>t.participant_type==="Agent"&&t.is_me!==!0))??[],[a]),m=l.useMemo(()=>(a==null?void 0:a.filter(t=>t.participant_type==="Authority"))??[],[a]),u=async()=>{await d({api_gateway:p})},s=(t,r)=>e.jsx(f,{title:r,children:e.jsx("div",{className:"max-w-screen-md",children:e.jsx(I,{items:[{label:"Participant ID",value:{type:"urn",value:t.participant_id}},{label:"Identity Token",value:{type:"urn",value:t.token}},{label:"Participant Type",value:{type:"role",value:t.participant_type}},{label:"Base URL",value:{type:"urn",value:t.base_url}}]})})}),h=t=>e.jsx(f,{title:"Other Agents",children:e.jsx(w,{className:"text-sm",data:t,keyExtractor:r=>r.participant_id,columns:[{header:"Participant ID",cell:r=>e.jsx(c,{variant:"info",children:y(r.participant_id)})},{header:"Identity Token",cell:r=>e.jsx(c,{variant:"info",children:y(r.token)})},{header:"Participant Type",cell:r=>e.jsx(c,{variant:"role",dsrole:r.participant_type,children:r.participant_type})},{header:"Base URL",cell:r=>e.jsx(c,{variant:"info",children:r.base_url})},{header:"Link",cell:r=>e.jsx(P,{to:"/participants/$participantId",params:{participantId:r.participant_id},children:e.jsxs(x,{variant:"link",children:["See details",e.jsx(b,{})]})})}]})});return e.jsxs(k,{children:[!n&&e.jsxs("div",{className:"p-8 py-6 mx-auto w-fit max-w-[70ch] bg-brand-sky/5 border border-stroke rounded-md",children:[e.jsx(g,{level:"h3",children:"Missing wallet..."}),e.jsxs(g,{level:"h5",children:["Your wallet is not yet connected as Provider. ",e.jsx("br",{})," Please complete the onboarding process to get started."]}),e.jsx(x,{size:"lg",className:"w-full mt-4",onClick:u,children:"Onboard wallet"})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Participants"}),s(n,"My Agent"),i.length>0&&h(i),m.map(t=>e.jsx("div",{children:s(t,"Authority")},t.participant_id))]})]})};export{Q as component};
