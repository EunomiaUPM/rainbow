import{r as m,j as t,a2 as p,a3 as b}from"./ui-B_Y8HlyQ.js";import{L as x}from"./tanstack-CQsG9zHS.js";import{af as v,ag as N,ah as P,U as w,G as y,B as i,f as r,a as o}from"./index-BIgPSPD9.js";import{D as C}from"./DataTable-DzeKJ7OI.js";import{F as u}from"./format-date-BF6u_ePE.js";import{u as S,P as T}from"./PolicyWrapperNew-DJ8Vc8B5.js";import{P as A,a as c}from"./PageSection-BVfoDSQu.js";import{P as B}from"./PageHeader-4W-j4IfQ.js";import{I as G}from"./InfoGrid-C6HGgrGJ.js";import{I as L}from"./info-list-DPCM4wLx.js";import{D as R,a as k,b as z,c as O,d as $}from"./drawer-Dqa-VTxm.js";import{P as E}from"./PolicyWrapperShow-i3_UEwps.js";import"./vendor-BtP0CW_r.js";import"./syntax-Deq619ix.js";import"./table-BjZx-WHX.js";import"./dayjs.min-C1qovwV9.js";import"./index-BYPG5sgh.js";import"./index-SEI0ik9x.js";import"./heading-DAwBOHqQ.js";import"./infoItemMappers-DqPqlsKL.js";const ct=function(){const{catalogId:n,datasetId:s}=v.useParams(),{data:a}=N(s),{data:h}=P(s),{data:d}=w(a.id),[f,l]=m.useState(!1),{mutateAsync:g}=S(),{api_gateway:j}=m.useContext(y),D={participant_type:"Provider"},I=async e=>{await g({api_gateway:j,datasetId:s,content:{offer:JSON.stringify(e)}}),l(!1)};return t.jsxs(A,{children:[t.jsx(B,{title:"Dataset with id",badge:t.jsx(i,{variant:"info",size:"lg",children:r(a.id)})}),t.jsx(G,{children:t.jsx(c,{children:t.jsx(L,{items:[{label:"Dataset title",value:a.dctTitle},{label:"Catalog creation date",value:{type:"custom",content:t.jsx(u,{date:a.dctIssued})}}]})})}),t.jsx(c,{title:"Distributions",children:t.jsx(C,{className:"text-sm",data:h,keyExtractor:e=>e.id,columns:[{header:"Distribution Id",cell:e=>t.jsx(i,{variant:"info",children:r(e.id)})},{header:"Distribution Title",accessorKey:"dctTitle",cell:e=>e.dctTitle??"undefined"},{header:"Created at",cell:e=>t.jsx(u,{date:e.dctIssued})},{header:"Associated Data service",cell:e=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx(x,{to:"/catalog/$catalogId/distribution-connector/$distributionId",params:{catalogId:n,distributionId:e.id},children:t.jsxs(o,{variant:"link",size:"sm",className:"h-auto p-0 text-xs",children:["See connector instance",t.jsx(p,{className:"ml-1 h-3 w-3"})]})}),t.jsx(x,{to:"/catalog/$catalogId/data-service/$dataserviceId",params:{catalogId:n,dataserviceId:e.dcatAccessService},children:t.jsxs(o,{variant:"link",size:"sm",className:"h-auto p-0 text-xs text-muted-foreground hover:text-foreground",children:["See dataservice",t.jsx(p,{className:"ml-1 h-3 w-3"})]})})]})}]})}),t.jsx(c,{title:"ODRL Policies",className:"mt-10",action:t.jsxs(R,{direction:"right",open:f,onOpenChange:e=>l(e),children:[t.jsx(k,{asChild:!0,children:t.jsxs(o,{variant:"outline",size:"sm",className:"h-6 text-[10px] uppercase tracking-wide px-2 gap-1",children:[t.jsx(b,{className:"h-3 w-3"}),"Add Policy"]})}),t.jsxs(z,{children:[t.jsx(O,{className:"px-8 border-b border-white/10 pb-4 mb-4",children:t.jsxs($,{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-lg font-semibold",children:"New ODRL Policy"}),t.jsxs("div",{className:"flex items-center text-sm font-normal text-muted-foreground",children:["for Dataset",t.jsx(i,{variant:"info",size:"sm",className:"ml-2 font-mono",children:r(a.id)})]})]})}),t.jsx(T,{onSubmit:I})]})]}),children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d&&d.map(e=>t.jsx(E,{policy:e,participant:D,datasetId:a.id,catalogId:void 0,datasetName:a.dctTitle},e.id))})})]})};export{ct as component};
