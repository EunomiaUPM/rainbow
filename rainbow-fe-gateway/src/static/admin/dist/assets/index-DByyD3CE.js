import{r as x,G as u,b as m,q as b,j as s}from"./index-Ebtqv1AD.js";import{P as y}from"./PubSubContext-MLiB1lm0.js";import{T as h,a as j,b as c,c as r,d as p,e as i}from"./table-BEVO1uuR.js";import{d as l}from"./dayjs.min-DySMBJ79.js";const g=async(t,e)=>await(await fetch(t+`/subscriptions/${e}`)).json(),S=(t,e)=>b({queryKey:["SUBSCRIPTIONS_BY_ID",e],queryFn:()=>g(t,e)}),I=t=>{const{api_gateway:e}=x.useContext(u),{data:a,isLoading:n,isError:o,error:d}=m(S(e,t));return{data:a,isLoading:n,isError:o,error:d}},T=async(t,e)=>await(await fetch(t+`/subscriptions/${e}/notifications`)).json(),f=(t,e)=>b({queryKey:["NOTIFICATIONS_BY_SUBSCRIPTION_ID",e],queryFn:()=>T(t,e)}),C=t=>{const{api_gateway:e}=x.useContext(u),{data:a,isLoading:n,isError:o,error:d}=m(f(e,t));return{data:a,isLoading:n,isError:o,error:d}},O=()=>{const{subscriptionId:t}=x.useContext(y),{data:e}=I(t),{data:a}=C(t);return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-bold",children:"Subscription"}),s.jsxs("div",{children:["Subscription with id : ",e.subscriptionId]}),s.jsxs("div",{children:[s.jsx("h2",{children:"Main Catalog info: "}),s.jsxs(h,{className:"text-sm",children:[s.jsx(j,{children:s.jsxs(c,{children:[s.jsx(r,{children:"Key"}),s.jsx(r,{children:"Value"})]})}),s.jsxs(p,{children:[s.jsxs(c,{children:[s.jsx(i,{children:"Subscription callback address"}),s.jsx(i,{children:e.callbackAddress})]}),s.jsxs(c,{children:[s.jsx(i,{children:"Subscription state"}),s.jsx(i,{children:e.active?"ACTIVE":"INACTIVE"})]}),s.jsxs(c,{children:[s.jsx(i,{children:"Subscription entity"}),s.jsx(i,{children:e.subscriptionEntity})]}),s.jsxs(c,{children:[s.jsx(i,{children:"Subscription creation date"}),s.jsx(i,{children:l(e.timestamp).format("DD/MM/YYYY - HH:mm")})]}),s.jsxs(c,{children:[s.jsx(i,{children:"Subscription expiration date"}),s.jsx(i,{children:l(e.expirationTime).format("DD/MM/YYYY - HH:mm")})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{children:"Notifications"}),s.jsxs(h,{className:"text-sm",children:[s.jsx(j,{children:s.jsxs(c,{children:[s.jsx(r,{children:"Notification Id"}),s.jsx(r,{children:"Category"}),s.jsx(r,{children:"Subcategory"}),s.jsx(r,{children:"Message Type"}),s.jsx(r,{children:"Message operation"}),s.jsx(r,{children:"Message content"}),s.jsx(r,{children:"Message timestamp"})]})}),s.jsx(p,{children:a.map(n=>s.jsxs(c,{children:[s.jsx(i,{children:n.notificationId.slice(0,20)+"..."}),s.jsx(i,{children:n.category}),s.jsx(i,{children:n.subcategory}),s.jsx(i,{children:n.messageType}),s.jsx(i,{children:n.messageOperation}),s.jsx(i,{children:JSON.stringify(n.messageContent)}),s.jsx(i,{children:l(n.timestamp).format("DD/MM/YYYY - HH:mm")})]},n.notificationId.slice(0,20)))})]})]})]})};export{O as component};
